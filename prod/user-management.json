{
    "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourcegroups/dashboards/providers/microsoft.portal/dashboards/user-management",
    "name": "user-management",
    "type": "microsoft.portal/dashboards",
    "location": "westeurope",
    "tags": {
        "hidden-title": "User Management"
    },
    "kind": "",
    "sku": null,
    "plan": null,
    "managedBy": "",
    "properties": {
        "lenses": {
            "0": {
                "order": 0,
                "parts": {
                    "0": {
                        "metadata": {
                            "inputs": [],
                            "settings": {
                                "content": {
                                    "settings": {
                                        "content": "# General reports\n",
                                        "markdownSource": 1,
                                        "subtitle": "",
                                        "title": ""
                                    }
                                }
                            },
                            "type": "Extension/HubsExtension/PartType/MarkdownPart"
                        },
                        "position": {
                            "colSpan": 14,
                            "rowSpan": 1,
                            "x": 0,
                            "y": 0
                        }
                    },
                    "1": {
                        "metadata": {
                            "filters": {
                                "customDimensions/system_SystemName": {
                                    "model": {
                                        "operator": "equals",
                                        "values": [
                                            "user-management"
                                        ]
                                    }
                                }
                            },
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "options",
                                    "value": {
                                        "chart": {
                                            "filterCollection": {
                                                "filters": [
                                                    {
                                                        "key": "customDimensions/system_SystemName",
                                                        "operator": 0,
                                                        "values": [
                                                            "user-management"
                                                        ]
                                                    }
                                                ]
                                            },
                                            "metrics": [
                                                {
                                                    "aggregationType": 4,
                                                    "metricVisualization": {
                                                        "displayName": "Server response time"
                                                    },
                                                    "name": "requests/duration",
                                                    "namespace": "microsoft.insights/components/kusto",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Monitor/providers/Microsoft.Insights/components/templafyproduction"
                                                    }
                                                }
                                            ],
                                            "timespan": {
                                                "grain": 1,
                                                "relative": {
                                                    "duration": 86400000
                                                },
                                                "showUTCTime": true
                                            },
                                            "title": "Average Response Time",
                                            "titleKind": 2,
                                            "visualization": {
                                                "axisVisualization": {
                                                    "x": {
                                                        "axisType": 2,
                                                        "isVisible": true
                                                    },
                                                    "y": {
                                                        "axisType": 1,
                                                        "isVisible": true
                                                    }
                                                },
                                                "chartType": 2,
                                                "legendVisualization": {
                                                    "hideSubtitle": false,
                                                    "isVisible": true,
                                                    "position": 2
                                                }
                                            }
                                        }
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "sharedTimeRange"
                                }
                            ],
                            "settings": {
                                "content": {
                                    "options": {
                                        "chart": {
                                            "metrics": [
                                                {
                                                    "aggregationType": 4,
                                                    "metricVisualization": {
                                                        "displayName": "Server response time"
                                                    },
                                                    "name": "requests/duration",
                                                    "namespace": "microsoft.insights/components/kusto",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Monitor/providers/Microsoft.Insights/components/templafyproduction"
                                                    }
                                                }
                                            ],
                                            "title": "Average Response Time",
                                            "titleKind": 2,
                                            "visualization": {
                                                "axisVisualization": {
                                                    "x": {
                                                        "axisType": 2,
                                                        "isVisible": true
                                                    },
                                                    "y": {
                                                        "axisType": 1,
                                                        "isVisible": true
                                                    }
                                                },
                                                "chartType": 2,
                                                "disablePinning": true,
                                                "legendVisualization": {
                                                    "hideSubtitle": false,
                                                    "isVisible": true,
                                                    "position": 2
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "type": "Extension/HubsExtension/PartType/MonitorChartPart"
                        },
                        "position": {
                            "colSpan": 6,
                            "rowSpan": 4,
                            "x": 0,
                            "y": 1
                        }
                    },
                    "2": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "resourceTypeMode"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ComponentId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Scope",
                                    "value": {
                                        "resourceIds": [
                                            "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Monitor/providers/Microsoft.Insights/components/templafyproduction"
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartId",
                                    "value": "0df752a7-1db3-48d1-a23b-fefef1368d38"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Version",
                                    "value": "2.0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "TimeRange",
                                    "value": "P3D"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DashboardId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DraftRequestParameters"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Query",
                                    "value": "let timeGrain=5m;\nlet dataset=requests\n    // additional filters can be applied here\n    | where client_Type != \"Browser\"\n    | where (iif(itemType == \"request\", (column_ifexists('customDimensions', '')[\"system_SystemName\"] == \"user-management\"), (itemType == \"request\" and column_ifexists(\"id\", operation_ParentId) in ((requests\n        | where customDimensions[\"system_SystemName\"] == \"user-management\"\n        | distinct id))) \n        or (itemType != \"request\" and operation_ParentId in ((requests\n        | where customDimensions[\"system_SystemName\"] == \"user-management\"\n        | distinct id)))));\ndataset\n// change 'operation_Name' on the below line to segment by a different property\n| summarize count_=sumif(itemCount, (iif(itemType == \"request\", (column_ifexists('customDimensions', '')[\"system_SystemName\"] == \"user-management\"), (itemType == \"request\" and column_ifexists(\"id\", operation_ParentId) in ((requests\n    | where customDimensions[\"system_SystemName\"] == \"user-management\"\n    | distinct id))) \n    or (itemType != \"request\" and operation_ParentId in ((requests\n    | where customDimensions[\"system_SystemName\"] == \"user-management\"\n    | distinct id)))))), avg(duration), percentiles(duration, 50, 95, 99)\n    by operation_Name\n// calculate duration percentiles and count for all requests (overall)\n| union(dataset\n    | summarize count_=sumif(itemCount, (iif(itemType == \"request\", (column_ifexists('customDimensions', '')[\"system_SystemName\"] == \"user-management\"), (itemType == \"request\" and column_ifexists(\"id\", operation_ParentId) in ((requests\n        | where customDimensions[\"system_SystemName\"] == \"user-management\"\n        | distinct id))) \n        or (itemType != \"request\" and operation_ParentId in ((requests\n        | where customDimensions[\"system_SystemName\"] == \"user-management\"\n        | distinct id)))))), avg(duration), percentiles(duration, 50, 95, 99)\n    | extend operation_Name=\"Overall\")\n| order by percentile_duration_95\n| where percentile_duration_95 > 1000\n"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ControlType",
                                    "value": "AnalyticsGrid"
                                },
                                {
                                    "isOptional": true,
                                    "name": "SpecificChart"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartTitle",
                                    "value": "Analytics"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartSubTitle",
                                    "value": "templafyproduction"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Dimensions"
                                },
                                {
                                    "isOptional": true,
                                    "name": "LegendOptions"
                                },
                                {
                                    "isOptional": true,
                                    "name": "IsQueryContainTimeRange",
                                    "value": false
                                }
                            ],
                            "settings": {
                                "content": {
                                    "GridColumnsWidth": {
                                        "Avg": "78px",
                                        "Count": "86px",
                                        "count_": "110px",
                                        "operation_Name": "371px",
                                        "Percentiles_95": "122px"
                                    },
                                    "PartSubTitle": "Production",
                                    "PartTitle": "Slowest Requests",
                                    "Query": "let timeGrain=5m;\nlet dataset=requests\n    // additional filters can be applied here\n    | where client_Type != \"Browser\"\n    | where (iif(itemType == \"request\", (column_ifexists('customDimensions', '')[\"system_SystemName\"] == \"user-management\"), (itemType == \"request\" and column_ifexists(\"id\", operation_ParentId) in ((requests\n        | where customDimensions[\"system_SystemName\"] == \"user-management\"\n        | distinct id))) \n        or (itemType != \"request\" and operation_ParentId in ((requests\n        | where customDimensions[\"system_SystemName\"] == \"user-management\"\n        | distinct id)))));\ndataset\n// change 'operation_Name' on the below line to segment by a different property\n| summarize Count=sumif(itemCount, (iif(itemType == \"request\", (column_ifexists('customDimensions', '')[\"system_SystemName\"] == \"user-management\"), (itemType == \"request\" and column_ifexists(\"id\", operation_ParentId) in ((requests\n    | where customDimensions[\"system_SystemName\"] == \"user-management\"\n    | distinct id))) \n    or (itemType != \"request\" and operation_ParentId in ((requests\n    | where customDimensions[\"system_SystemName\"] == \"user-management\"\n    | distinct id)))))), Avg = avg(duration), Percentiles_95 = percentiles(duration, 95)\n    by operation_Name\n// calculate duration percentiles and count for all requests (overall)\n| union(dataset\n    | summarize Count=sumif(itemCount, (iif(itemType == \"request\", (column_ifexists('customDimensions', '')[\"system_SystemName\"] == \"user-management\"), (itemType == \"request\" and column_ifexists(\"id\", operation_ParentId) in ((requests\n        | where customDimensions[\"system_SystemName\"] == \"user-management\"\n        | distinct id))) \n        or (itemType != \"request\" and operation_ParentId in ((requests\n        | where customDimensions[\"system_SystemName\"] == \"user-management\"\n        | distinct id)))))), Avg = avg(duration), Percentiles_95 = percentiles(duration, 95)\n    | extend operation_Name=\"Overall\")\n| order by Percentiles_95\n| where Percentiles_95 > 1000\n\n"
                                }
                            },
                            "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart"
                        },
                        "position": {
                            "colSpan": 8,
                            "rowSpan": 4,
                            "x": 6,
                            "y": 1
                        }
                    },
                    "3": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "resourceTypeMode"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ComponentId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Scope",
                                    "value": {
                                        "resourceIds": [
                                            "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Monitor/providers/microsoft.insights/components/templafyproduction"
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartId",
                                    "value": "13ffdf48-3962-4297-8710-6c75ba81178b"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Version",
                                    "value": "2.0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "TimeRange"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DashboardId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DraftRequestParameters"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Query",
                                    "value": "let systemName = \"user-management\";\nlet timeFrame = 28d;\nlet topRequests=requests\n| where timestamp > ago(timeFrame)\n| where customDimensions[\"KubernetesNamespace\"] == systemName\n| where operation_Name != \"\"\n| summarize Count = count() by operation_Name\n| order by Count\n| top 6 by Count\n| project operation_Name\n;\nrequests\n| where operation_Name in (topRequests)\n| where timestamp > ago(timeFrame)\n| where customDimensions[\"KubernetesNamespace\"] == systemName\n| summarize Duration=percentiles(duration, 95, 99) by operation_Name, bin(timestamp, 7d)\n| render timechart \n\n"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ControlType",
                                    "value": "FrameControlChart"
                                },
                                {
                                    "isOptional": true,
                                    "name": "SpecificChart",
                                    "value": "Line"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartTitle",
                                    "value": "Analytics"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartSubTitle",
                                    "value": "templafyproduction"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Dimensions",
                                    "value": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "operation_Name",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "timestamp",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "Duration",
                                                "type": "real"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "LegendOptions",
                                    "value": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "IsQueryContainTimeRange",
                                    "value": true
                                }
                            ],
                            "settings": {
                                "content": {
                                    "IsQueryContainTimeRange": false,
                                    "PartSubTitle": "Production",
                                    "PartTitle": "Most Called Requests Duration Over Time (95th percentile)",
                                    "Query": "let queryTimeRange = toscalar(requests\n| summarize interval = (max(timestamp)-min(timestamp))\n| project interval);\nlet bin_size = (tr: timespan){\n    case(\n        tr <= 1h, 1m,\n        tr <= 24h, 10m,\n        1h\n        )\n};\nlet binSize = bin_size(queryTimeRange);\nlet systemName = \"user-management\";\nlet topRequests=requests\n| where customDimensions[\"system_SystemName\"] == systemName\n| where operation_Name != \"\"\n| summarize Count = count() by operation_Name\n| order by Count\n| top 6 by Count\n| project operation_Name;\nrequests\n| where operation_Name in (topRequests)\n| where customDimensions[\"system_SystemName\"] == systemName\n| summarize Duration=percentiles(duration, 95, 99) by operation_Name, bin(timestamp,binSize)\n| render timechart \n\n"
                                }
                            },
                            "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart"
                        },
                        "position": {
                            "colSpan": 14,
                            "rowSpan": 4,
                            "x": 0,
                            "y": 5
                        }
                    },
                    "4": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "resourceTypeMode"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ComponentId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Scope",
                                    "value": {
                                        "resourceIds": [
                                            "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Monitor/providers/microsoft.insights/components/templafyproduction"
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartId",
                                    "value": "402153c6-8bb3-4fd1-8104-0bdf453afa28"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Version",
                                    "value": "2.0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "TimeRange"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DashboardId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DraftRequestParameters"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Query",
                                    "value": "// Exceptions causing request failures \n// Find which exceptions led to failed requests in the past hour. \nlet systemName = \"user-management\";\nlet since = ago(7d);\nrequests\n| where timestamp > since\n| where customDimensions.KubernetesNamespace == systemName\n| where success == false\n| join kind= inner (exceptions) on operation_Id\n| project exceptionType = type, requestName = name, failedMethod = method, operation_Id, timestamp\n| summarize ExampleOperationId=max(operation_Id),LastOcurrence=max(timestamp), count() by exceptionType, failedMethod, requestName\n| order by count_\n\n"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ControlType",
                                    "value": "AnalyticsGrid"
                                },
                                {
                                    "isOptional": true,
                                    "name": "SpecificChart"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartTitle",
                                    "value": "Analytics"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartSubTitle",
                                    "value": "templafyproduction"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Dimensions"
                                },
                                {
                                    "isOptional": true,
                                    "name": "LegendOptions"
                                },
                                {
                                    "isOptional": true,
                                    "name": "IsQueryContainTimeRange",
                                    "value": true
                                }
                            ],
                            "settings": {
                                "content": {
                                    "GridColumnsWidth": {
                                        "count_": "73px",
                                        "exceptionType": "396px",
                                        "failedMethod": "245px",
                                        "LastOcurrence": "144px",
                                        "requestName": "372px"
                                    },
                                    "IsQueryContainTimeRange": false,
                                    "PartTitle": "Top Exceptions",
                                    "Query": "// Exceptions causing request failures \n// Find which exceptions led to failed requests in the past hour. \nlet systemName = \"user-management\";\nrequests\n| where customDimensions.system_SystemName == systemName\n| where success == false\n| join kind= inner (exceptions) on operation_Id\n| project exceptionType = type, requestName = name, failedMethod = method, operation_Id, timestamp\n| summarize ExampleOperationId=max(operation_Id),LastOcurrence=max(timestamp), count() by exceptionType, failedMethod, requestName\n| order by count_\n\n"
                                }
                            },
                            "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart"
                        },
                        "position": {
                            "colSpan": 14,
                            "rowSpan": 5,
                            "x": 0,
                            "y": 9
                        }
                    },
                    "5": {
                        "metadata": {
                            "inputs": [],
                            "settings": {
                                "content": {
                                    "settings": {
                                        "content": "# Templafy Prod0 Resources\n",
                                        "markdownSource": 1,
                                        "subtitle": "",
                                        "title": ""
                                    }
                                }
                            },
                            "type": "Extension/HubsExtension/PartType/MarkdownPart"
                        },
                        "position": {
                            "colSpan": 14,
                            "rowSpan": 1,
                            "x": 0,
                            "y": 14
                        }
                    },
                    "6": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "resourceTypeMode"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ComponentId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Scope",
                                    "value": {
                                        "resourceIds": [
                                            "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod0/providers/Microsoft.ContainerService/managedClusters/templafyprod0"
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartId",
                                    "value": "817b6bb8-77ed-4698-b2bf-6cbbd8b4e8de"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Version",
                                    "value": "2.0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "TimeRange"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DashboardId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DraftRequestParameters",
                                    "value": {
                                        "scope": "hierarchy"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "Query",
                                    "value": "let endDateTime = now();\nlet startDateTime = ago(12h);\nlet trendBinSize = 30m;\nlet capacityCounterName = 'memoryLimitBytes';\nlet usageCounterName = 'memoryRssBytes';\nlet containerWebApiSystemInternal = \"integration-management-webapi-private\" ;\nPerf\n| where InstanceName contains containerWebApiSystemInternal\n| where TimeGenerated < endDateTime\n| where TimeGenerated >= startDateTime\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, trendBinSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + trendBinSize, LimitValue\n| join (\n  Perf\n  | where InstanceName contains containerWebApiSystemInternal\n  | where TimeGenerated < endDateTime + trendBinSize\n  | where TimeGenerated >= startDateTime - trendBinSize\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize AggregatedValue = avg(UsagePercent) by bin(TimeGenerated, trendBinSize), InstanceName\n| render timechart \n\n"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ControlType",
                                    "value": "FrameControlChart"
                                },
                                {
                                    "isOptional": true,
                                    "name": "SpecificChart",
                                    "value": "Line"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartTitle",
                                    "value": "Analytics"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartSubTitle",
                                    "value": "templafyprod0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Dimensions",
                                    "value": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "InstanceName",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "TimeGenerated",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "AggregatedValue",
                                                "type": "real"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "LegendOptions",
                                    "value": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "IsQueryContainTimeRange",
                                    "value": true
                                }
                            ],
                            "settings": {
                                "content": {
                                    "Dimensions": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "InstanceName",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "TimeGenerated",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "UsagePercent",
                                                "type": "real"
                                            }
                                        ]
                                    },
                                    "IsQueryContainTimeRange": false,
                                    "LegendOptions": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    },
                                    "PartTitle": "Memory used percentage over time (WebApi)",
                                    "Query": "let queryTimeRange = toscalar(Perf\n| summarize interval = (max(TimeGenerated)-min(TimeGenerated))\n| project interval);\nlet bin_size = (tr: timespan){\n    case(\n        tr <= 1h, 1m,\n        tr <= 24h, 10m,\n        1h\n        )\n};\nlet binSize = bin_size(queryTimeRange);\nlet capacityCounterName = 'memoryLimitBytes';\nlet usageCounterName = 'memoryRssBytes';\nlet container = \"user-management-webapi\" ;\nPerf\n| where InstanceName endswith container\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, binSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + binSize, LimitValue\n| join (\n  Perf\n  | where InstanceName endswith container\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, binSize), InstanceName\n| render timechart \n\n"
                                }
                            },
                            "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 4,
                            "x": 0,
                            "y": 15
                        }
                    },
                    "7": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "resourceTypeMode"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ComponentId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Scope",
                                    "value": {
                                        "resourceIds": [
                                            "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod0/providers/Microsoft.ContainerService/managedClusters/templafyprod0"
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartId",
                                    "value": "817b6bb8-77ed-4698-b2bf-6cbbd8b4e8de"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Version",
                                    "value": "2.0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "TimeRange"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DashboardId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DraftRequestParameters",
                                    "value": {
                                        "scope": "hierarchy"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "Query",
                                    "value": "let endDateTime = now();\nlet startDateTime = ago(12h);\nlet trendBinSize = 30m;\nlet capacityCounterName = 'memoryLimitBytes';\nlet usageCounterName = 'memoryRssBytes';\nlet containerWebApiSystemInternal = \"integration-management-webapi-private\" ;\nPerf\n| where InstanceName contains containerWebApiSystemInternal\n| where TimeGenerated < endDateTime\n| where TimeGenerated >= startDateTime\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, trendBinSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + trendBinSize, LimitValue\n| join (\n  Perf\n  | where InstanceName contains containerWebApiSystemInternal\n  | where TimeGenerated < endDateTime + trendBinSize\n  | where TimeGenerated >= startDateTime - trendBinSize\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize AggregatedValue = avg(UsagePercent) by bin(TimeGenerated, trendBinSize), InstanceName\n| render timechart \n\n"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ControlType",
                                    "value": "FrameControlChart"
                                },
                                {
                                    "isOptional": true,
                                    "name": "SpecificChart",
                                    "value": "Line"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartTitle",
                                    "value": "Analytics"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartSubTitle",
                                    "value": "templafyprod0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Dimensions",
                                    "value": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "InstanceName",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "TimeGenerated",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "AggregatedValue",
                                                "type": "real"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "LegendOptions",
                                    "value": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "IsQueryContainTimeRange",
                                    "value": true
                                }
                            ],
                            "settings": {
                                "content": {
                                    "Dimensions": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "InstanceName",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "TimeGenerated",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "UsagePercent",
                                                "type": "real"
                                            }
                                        ]
                                    },
                                    "IsQueryContainTimeRange": false,
                                    "LegendOptions": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    },
                                    "PartTitle": "Memory used percentage over time (Message Processor)",
                                    "Query": "let queryTimeRange = toscalar(Perf\n| summarize interval = (max(TimeGenerated)-min(TimeGenerated))\n| project interval);\nlet bin_size = (tr: timespan){\n    case(\n        tr <= 1h, 1m,\n        tr <= 24h, 10m,\n        1h\n        )\n};\nlet binSize = bin_size(queryTimeRange);\nlet capacityCounterName = 'memoryLimitBytes';\nlet usageCounterName = 'memoryRssBytes';\nlet container = \"user-management-messageprocessor\" ;\nPerf\n| where InstanceName endswith container\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, binSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + binSize, LimitValue\n| join (\n  Perf\n  | where InstanceName endswith container\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, binSize), InstanceName\n| render timechart \n\n"
                                }
                            },
                            "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 4,
                            "x": 7,
                            "y": 15
                        }
                    },
                    "8": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "resourceTypeMode"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ComponentId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Scope",
                                    "value": {
                                        "resourceIds": [
                                            "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod0/providers/Microsoft.ContainerService/managedClusters/templafyprod0"
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartId",
                                    "value": "817b6bb8-77ed-4698-b2bf-6cbbd8b4e8de"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Version",
                                    "value": "2.0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "TimeRange"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DashboardId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DraftRequestParameters",
                                    "value": {
                                        "scope": "hierarchy"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "Query",
                                    "value": "let endDateTime = now();\nlet startDateTime = ago(12h);\nlet trendBinSize = 30m;\nlet capacityCounterName = 'memoryLimitBytes';\nlet usageCounterName = 'memoryRssBytes';\nlet containerWebApiSystemInternal = \"integration-management-webapi-private\" ;\nPerf\n| where InstanceName contains containerWebApiSystemInternal\n| where TimeGenerated < endDateTime\n| where TimeGenerated >= startDateTime\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, trendBinSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + trendBinSize, LimitValue\n| join (\n  Perf\n  | where InstanceName contains containerWebApiSystemInternal\n  | where TimeGenerated < endDateTime + trendBinSize\n  | where TimeGenerated >= startDateTime - trendBinSize\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize AggregatedValue = avg(UsagePercent) by bin(TimeGenerated, trendBinSize), InstanceName\n| render timechart \n\n"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ControlType",
                                    "value": "FrameControlChart"
                                },
                                {
                                    "isOptional": true,
                                    "name": "SpecificChart",
                                    "value": "Line"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartTitle",
                                    "value": "Analytics"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartSubTitle",
                                    "value": "templafyprod0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Dimensions",
                                    "value": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "InstanceName",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "TimeGenerated",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "AggregatedValue",
                                                "type": "real"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "LegendOptions",
                                    "value": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "IsQueryContainTimeRange",
                                    "value": true
                                }
                            ],
                            "settings": {
                                "content": {
                                    "Dimensions": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "InstanceName",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "TimeGenerated",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "UsagePercent",
                                                "type": "real"
                                            }
                                        ]
                                    },
                                    "IsQueryContainTimeRange": false,
                                    "LegendOptions": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    },
                                    "PartTitle": "CPU used percentage over time (WebApi)",
                                    "Query": "let queryTimeRange = toscalar(Perf\n| summarize interval = (max(TimeGenerated)-min(TimeGenerated))\n| project interval);\nlet bin_size = (tr: timespan){\n    case(\n        tr <= 1h, 1m,\n        tr <= 24h, 10m,\n        1h\n        )\n};\nlet binSize = bin_size(queryTimeRange);\nlet capacityCounterName = 'cpuLimitNanoCores';\nlet usageCounterName = 'cpuUsageNanoCores';\nlet containerSystemName = \"user-management-webapi\" ;\nPerf\n| where InstanceName has containerSystemName\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, binSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + binSize, LimitValue\n| join (\n  Perf\n  | where InstanceName has containerSystemName\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, binSize), InstanceName\n| render timechart \n\n"
                                }
                            },
                            "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 4,
                            "x": 0,
                            "y": 19
                        }
                    },
                    "9": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "resourceTypeMode"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ComponentId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Scope",
                                    "value": {
                                        "resourceIds": [
                                            "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod0/providers/Microsoft.ContainerService/managedClusters/templafyprod0"
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartId",
                                    "value": "817b6bb8-77ed-4698-b2bf-6cbbd8b4e8de"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Version",
                                    "value": "2.0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "TimeRange"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DashboardId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DraftRequestParameters",
                                    "value": {
                                        "scope": "hierarchy"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "Query",
                                    "value": "let endDateTime = now();\nlet startDateTime = ago(12h);\nlet trendBinSize = 30m;\nlet capacityCounterName = 'memoryLimitBytes';\nlet usageCounterName = 'memoryRssBytes';\nlet containerWebApiSystemInternal = \"integration-management-webapi-private\" ;\nPerf\n| where InstanceName contains containerWebApiSystemInternal\n| where TimeGenerated < endDateTime\n| where TimeGenerated >= startDateTime\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, trendBinSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + trendBinSize, LimitValue\n| join (\n  Perf\n  | where InstanceName contains containerWebApiSystemInternal\n  | where TimeGenerated < endDateTime + trendBinSize\n  | where TimeGenerated >= startDateTime - trendBinSize\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize AggregatedValue = avg(UsagePercent) by bin(TimeGenerated, trendBinSize), InstanceName\n| render timechart \n\n"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ControlType",
                                    "value": "FrameControlChart"
                                },
                                {
                                    "isOptional": true,
                                    "name": "SpecificChart",
                                    "value": "Line"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartTitle",
                                    "value": "Analytics"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartSubTitle",
                                    "value": "templafyprod0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Dimensions",
                                    "value": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "InstanceName",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "TimeGenerated",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "AggregatedValue",
                                                "type": "real"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "LegendOptions",
                                    "value": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "IsQueryContainTimeRange",
                                    "value": true
                                }
                            ],
                            "settings": {
                                "content": {
                                    "Dimensions": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "InstanceName",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "TimeGenerated",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "UsagePercent",
                                                "type": "real"
                                            }
                                        ]
                                    },
                                    "IsQueryContainTimeRange": false,
                                    "LegendOptions": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    },
                                    "PartTitle": "CPU used percentage over time (Message Processor)",
                                    "Query": "let queryTimeRange = toscalar(Perf\n| summarize interval = (max(TimeGenerated)-min(TimeGenerated))\n| project interval);\nlet bin_size = (tr: timespan){\n    case(\n        tr <= 1h, 1m,\n        tr <= 24h, 10m,\n        1h\n        )\n};\nlet binSize = bin_size(queryTimeRange);\nlet capacityCounterName = 'cpuLimitNanoCores';\nlet usageCounterName = 'cpuUsageNanoCores';\nlet containerSystemName = \"user-management-messageprocessor\" ;\nPerf\n| where InstanceName endswith containerSystemName\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, binSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + binSize, LimitValue\n| join (\n  Perf\n  | where InstanceName endswith containerSystemName\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, binSize), InstanceName\n| render timechart \n\n"
                                }
                            },
                            "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 4,
                            "x": 7,
                            "y": 19
                        }
                    },
                    "10": {
                        "metadata": {
                            "filters": {
                                "EntityName": {
                                    "model": {
                                        "operator": "equals",
                                        "values": [
                                            "usermanagement"
                                        ]
                                    }
                                }
                            },
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "options",
                                    "value": {
                                        "chart": {
                                            "filterCollection": {
                                                "filters": [
                                                    {
                                                        "key": "EntityName",
                                                        "operator": 0,
                                                        "values": [
                                                            "librarymanagement"
                                                        ]
                                                    }
                                                ]
                                            },
                                            "metrics": [
                                                {
                                                    "aggregationType": 1,
                                                    "metricVisualization": {
                                                        "displayName": "Incoming Messages"
                                                    },
                                                    "name": "IncomingMessages",
                                                    "namespace": "microsoft.servicebus/namespaces",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod0/providers/Microsoft.ServiceBus/namespaces/templafyprod0"
                                                    }
                                                },
                                                {
                                                    "aggregationType": 1,
                                                    "metricVisualization": {
                                                        "displayName": "Outgoing Messages"
                                                    },
                                                    "name": "OutgoingMessages",
                                                    "namespace": "microsoft.servicebus/namespaces",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod0/providers/Microsoft.ServiceBus/namespaces/templafyprod0"
                                                    }
                                                }
                                            ],
                                            "timespan": {
                                                "grain": 1,
                                                "relative": {
                                                    "duration": 86400000
                                                },
                                                "showUTCTime": false
                                            },
                                            "title": "Message Trafic",
                                            "titleKind": 2,
                                            "visualization": {
                                                "axisVisualization": {
                                                    "x": {
                                                        "axisType": 2,
                                                        "isVisible": true
                                                    },
                                                    "y": {
                                                        "axisType": 1,
                                                        "isVisible": true
                                                    }
                                                },
                                                "chartType": 2,
                                                "legendVisualization": {
                                                    "hideSubtitle": false,
                                                    "isVisible": true,
                                                    "position": 2
                                                }
                                            }
                                        }
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "sharedTimeRange"
                                }
                            ],
                            "settings": {
                                "content": {
                                    "options": {
                                        "chart": {
                                            "metrics": [
                                                {
                                                    "aggregationType": 1,
                                                    "metricVisualization": {
                                                        "displayName": "Incoming Messages"
                                                    },
                                                    "name": "IncomingMessages",
                                                    "namespace": "microsoft.servicebus/namespaces",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod0/providers/Microsoft.ServiceBus/namespaces/templafyprod0"
                                                    }
                                                },
                                                {
                                                    "aggregationType": 1,
                                                    "metricVisualization": {
                                                        "displayName": "Outgoing Messages"
                                                    },
                                                    "name": "OutgoingMessages",
                                                    "namespace": "microsoft.servicebus/namespaces",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod0/providers/Microsoft.ServiceBus/namespaces/templafyprod0"
                                                    }
                                                }
                                            ],
                                            "title": "Message Traffic",
                                            "titleKind": 2,
                                            "visualization": {
                                                "axisVisualization": {
                                                    "x": {
                                                        "axisType": 2,
                                                        "isVisible": true
                                                    },
                                                    "y": {
                                                        "axisType": 1,
                                                        "isVisible": true
                                                    }
                                                },
                                                "chartType": 2,
                                                "disablePinning": true,
                                                "legendVisualization": {
                                                    "hideSubtitle": false,
                                                    "isVisible": true,
                                                    "position": 2
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "type": "Extension/HubsExtension/PartType/MonitorChartPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 4,
                            "x": 0,
                            "y": 23
                        }
                    },
                    "11": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "options",
                                    "value": {
                                        "chart": {
                                            "metrics": [
                                                {
                                                    "aggregationType": 4,
                                                    "metricVisualization": {
                                                        "displayName": "DTU percentage",
                                                        "resourceDisplayName": "templafyprod0/librarymanagement"
                                                    },
                                                    "name": "dtu_consumption_percent",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod0/providers/Microsoft.Sql/servers/templafyprod0/databases/LibraryManagement"
                                                    }
                                                }
                                            ],
                                            "openBladeOnClick": {
                                                "openBlade": true
                                            },
                                            "title": "Compute utilization",
                                            "titleKind": 2,
                                            "visualization": {
                                                "chartType": 2
                                            }
                                        }
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "sharedTimeRange"
                                }
                            ],
                            "settings": {
                                "content": {
                                    "options": {
                                        "chart": {
                                            "metrics": [
                                                {
                                                    "aggregationType": 4,
                                                    "metricVisualization": {
                                                        "displayName": "CPU percentage",
                                                        "resourceDisplayName": "templafyprod0/UserManagement"
                                                    },
                                                    "name": "cpu_percent",
                                                    "namespace": "microsoft.sql/servers/databases",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod0/providers/Microsoft.Sql/servers/templafyprod0/databases/UserManagement"
                                                    }
                                                },
                                                {
                                                    "aggregationType": 4,
                                                    "metricVisualization": {
                                                        "displayName": "Data IO percentage",
                                                        "resourceDisplayName": "templafyprod0/UserManagement"
                                                    },
                                                    "name": "physical_data_read_percent",
                                                    "namespace": "microsoft.sql/servers/databases",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod0/providers/Microsoft.Sql/servers/templafyprod0/databases/UserManagement"
                                                    }
                                                }
                                            ],
                                            "title": "Database DTU Average Usage",
                                            "titleKind": 2,
                                            "visualization": {
                                                "axisVisualization": {
                                                    "x": {
                                                        "axisType": 2,
                                                        "isVisible": true
                                                    },
                                                    "y": {
                                                        "axisType": 1,
                                                        "isVisible": true
                                                    }
                                                },
                                                "chartType": 2,
                                                "disablePinning": true,
                                                "legendVisualization": {
                                                    "hideSubtitle": false,
                                                    "isVisible": true,
                                                    "position": 2
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "type": "Extension/HubsExtension/PartType/MonitorChartPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 4,
                            "x": 7,
                            "y": 23
                        }
                    },
                    "12": {
                        "metadata": {
                            "inputs": [],
                            "settings": {
                                "content": {
                                    "settings": {
                                        "content": "# Templafy Prod1 Resources\n",
                                        "markdownSource": 1,
                                        "subtitle": "",
                                        "title": ""
                                    }
                                }
                            },
                            "type": "Extension/HubsExtension/PartType/MarkdownPart"
                        },
                        "position": {
                            "colSpan": 14,
                            "rowSpan": 1,
                            "x": 0,
                            "y": 27
                        }
                    },
                    "13": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "resourceTypeMode"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ComponentId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Scope",
                                    "value": {
                                        "resourceIds": [
                                            "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod1/providers/Microsoft.ContainerService/managedClusters/templafyprod1"
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartId",
                                    "value": "30ddc6c8-9dc5-435e-8282-9f1821538efe"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Version",
                                    "value": "2.0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "TimeRange"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DashboardId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DraftRequestParameters",
                                    "value": {
                                        "scope": "hierarchy"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "Query",
                                    "value": "let endDateTime = now();\nlet startDateTime = ago(12h);\nlet trendBinSize = 30m;\nlet capacityCounterName = 'memoryLimitBytes';\nlet usageCounterName = 'memoryRssBytes';\nlet containerWebApiSystemInternal = \"account-management-webapi-private\" ;\nPerf\n| where InstanceName contains containerWebApiSystemInternal\n| where TimeGenerated < endDateTime\n| where TimeGenerated >= startDateTime\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, trendBinSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + trendBinSize, LimitValue\n| join (\n  Perf\n  | where InstanceName contains containerWebApiSystemInternal\n  | where TimeGenerated < endDateTime + trendBinSize\n  | where TimeGenerated >= startDateTime - trendBinSize\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, trendBinSize), InstanceName\n| render timechart \n\n"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ControlType",
                                    "value": "FrameControlChart"
                                },
                                {
                                    "isOptional": true,
                                    "name": "SpecificChart",
                                    "value": "Line"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartTitle",
                                    "value": "Analytics"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartSubTitle",
                                    "value": "templafyprod1"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Dimensions",
                                    "value": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "InstanceName",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "TimeGenerated",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "UsagePercent",
                                                "type": "real"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "LegendOptions",
                                    "value": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "IsQueryContainTimeRange",
                                    "value": true
                                }
                            ],
                            "settings": {
                                "content": {
                                    "IsQueryContainTimeRange": false,
                                    "PartTitle": "Memory used percentage over time (WebApi)",
                                    "Query": "let queryTimeRange = toscalar(Perf\n| summarize interval = (max(TimeGenerated)-min(TimeGenerated))\n| project interval);\nlet bin_size = (tr: timespan){\n    case(\n        tr <= 1h, 1m,\n        tr <= 24h, 10m,\n        1h\n        )\n};\nlet binSize = bin_size(queryTimeRange);\nlet capacityCounterName = 'memoryLimitBytes';\nlet usageCounterName = 'memoryRssBytes';\nlet container = \"user-management-webapi\" ;\nPerf\n| where InstanceName endswith container\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, binSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + binSize, LimitValue\n| join (\n  Perf\n  | where InstanceName endswith container\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, binSize), InstanceName\n| render timechart \n\n"
                                }
                            },
                            "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 5,
                            "x": 0,
                            "y": 28
                        }
                    },
                    "14": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "resourceTypeMode"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ComponentId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Scope",
                                    "value": {
                                        "resourceIds": [
                                            "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod1/providers/Microsoft.ContainerService/managedClusters/templafyprod1"
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartId",
                                    "value": "1581cd87-735e-45cd-823d-e0fd3515e9b4"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Version",
                                    "value": "2.0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "TimeRange"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DashboardId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DraftRequestParameters",
                                    "value": {
                                        "scope": "hierarchy"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "Query",
                                    "value": "let endDateTime = now();\nlet startDateTime = ago(12h);\nlet trendBinSize = 30m;\nlet capacityCounterName = 'memoryLimitBytes';\nlet usageCounterName = 'memoryRssBytes';\nlet containerWebApiSystemInternal = \"account-management-messageprocessor\" ;\nPerf\n| where InstanceName contains containerWebApiSystemInternal\n| where TimeGenerated < endDateTime\n| where TimeGenerated >= startDateTime\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, trendBinSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + trendBinSize, LimitValue\n| join (\n  Perf\n  | where InstanceName contains containerWebApiSystemInternal\n  | where TimeGenerated < endDateTime + trendBinSize\n  | where TimeGenerated >= startDateTime - trendBinSize\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, trendBinSize), InstanceName\n| render timechart \n\n"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ControlType",
                                    "value": "FrameControlChart"
                                },
                                {
                                    "isOptional": true,
                                    "name": "SpecificChart",
                                    "value": "Line"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartTitle",
                                    "value": "Analytics"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartSubTitle",
                                    "value": "templafyprod1"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Dimensions",
                                    "value": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "InstanceName",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "TimeGenerated",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "UsagePercent",
                                                "type": "real"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "LegendOptions",
                                    "value": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "IsQueryContainTimeRange",
                                    "value": true
                                }
                            ],
                            "settings": {
                                "content": {
                                    "IsQueryContainTimeRange": false,
                                    "PartTitle": "Memory used percentage over time (Message processor)",
                                    "Query": "let queryTimeRange = toscalar(Perf\n| summarize interval = (max(TimeGenerated)-min(TimeGenerated))\n| project interval);\nlet bin_size = (tr: timespan){\n    case(\n        tr <= 1h, 1m,\n        tr <= 24h, 10m,\n        1h\n        )\n};\nlet binSize = bin_size(queryTimeRange);\nlet capacityCounterName = 'memoryLimitBytes';\nlet usageCounterName = 'memoryRssBytes';\nlet container = \"user-management-messageprocessor\" ;\nPerf\n| where InstanceName endswith container\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, binSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + binSize, LimitValue\n| join (\n  Perf\n  | where InstanceName endswith container\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, binSize), InstanceName\n| render timechart \n\n"
                                }
                            },
                            "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 5,
                            "x": 7,
                            "y": 28
                        }
                    },
                    "15": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "resourceTypeMode"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ComponentId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Scope",
                                    "value": {
                                        "resourceIds": [
                                            "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod1/providers/Microsoft.ContainerService/managedClusters/templafyprod1"
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartId",
                                    "value": "5bc2e71d-4a76-450d-a131-f5edf8328093"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Version",
                                    "value": "2.0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "TimeRange"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DashboardId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DraftRequestParameters",
                                    "value": {
                                        "scope": "hierarchy"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "Query",
                                    "value": "let endDateTime = now();\nlet startDateTime = ago(12h);\nlet trendBinSize = 30m;\nlet capacityCounterName = 'cpuLimitNanoCores';\nlet usageCounterName = 'cpuUsageNanoCores';\nlet containerSystemName = \"account-management-webapi-private\" ;\nPerf\n| where InstanceName contains containerSystemName\n| where TimeGenerated < endDateTime\n| where TimeGenerated >= startDateTime\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, trendBinSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + trendBinSize, LimitValue\n| join (\n  Perf\n  | where InstanceName contains containerSystemName\n  | where TimeGenerated < endDateTime + trendBinSize\n  | where TimeGenerated >= startDateTime - trendBinSize\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, trendBinSize), InstanceName\n| render timechart \n\n"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ControlType",
                                    "value": "FrameControlChart"
                                },
                                {
                                    "isOptional": true,
                                    "name": "SpecificChart",
                                    "value": "Line"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartTitle",
                                    "value": "Analytics"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartSubTitle",
                                    "value": "templafyprod1"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Dimensions",
                                    "value": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "InstanceName",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "TimeGenerated",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "UsagePercent",
                                                "type": "real"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "LegendOptions",
                                    "value": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "IsQueryContainTimeRange",
                                    "value": true
                                }
                            ],
                            "settings": {
                                "content": {
                                    "IsQueryContainTimeRange": false,
                                    "PartTitle": "CPU used percentage over time (WebApi)",
                                    "Query": "let queryTimeRange = toscalar(Perf\n| summarize interval = (max(TimeGenerated)-min(TimeGenerated))\n| project interval);\nlet bin_size = (tr: timespan){\n    case(\n        tr <= 1h, 1m,\n        tr <= 24h, 10m,\n        1h\n        )\n};\nlet binSize = bin_size(queryTimeRange);\nlet capacityCounterName = 'cpuLimitNanoCores';\nlet usageCounterName = 'cpuUsageNanoCores';\nlet containerSystemName = \"user-management-webapi\" ;\nPerf\n| where InstanceName has containerSystemName\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, binSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + binSize, LimitValue\n| join (\n  Perf\n  | where InstanceName has containerSystemName\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, binSize), InstanceName\n| render timechart\n"
                                }
                            },
                            "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 5,
                            "x": 0,
                            "y": 33
                        }
                    },
                    "16": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "resourceTypeMode"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ComponentId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Scope",
                                    "value": {
                                        "resourceIds": [
                                            "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod1/providers/Microsoft.ContainerService/managedClusters/templafyprod1"
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartId",
                                    "value": "8d5aacd2-8958-4fb2-806f-8706b0259a9d"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Version",
                                    "value": "2.0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "TimeRange"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DashboardId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DraftRequestParameters",
                                    "value": {
                                        "scope": "hierarchy"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "Query",
                                    "value": "let endDateTime = now();\nlet startDateTime = ago(12h);\nlet trendBinSize = 30m;\nlet capacityCounterName = 'cpuLimitNanoCores';\nlet usageCounterName = 'cpuUsageNanoCores';\nlet containerSystemName = \"account-management-messageprocessor\" ;\nPerf\n| where InstanceName contains containerSystemName\n| where TimeGenerated < endDateTime\n| where TimeGenerated >= startDateTime\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, trendBinSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + trendBinSize, LimitValue\n| join (\n  Perf\n  | where InstanceName contains containerSystemName\n  | where TimeGenerated < endDateTime + trendBinSize\n  | where TimeGenerated >= startDateTime - trendBinSize\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, trendBinSize), InstanceName\n| render timechart \n\n"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ControlType",
                                    "value": "FrameControlChart"
                                },
                                {
                                    "isOptional": true,
                                    "name": "SpecificChart",
                                    "value": "Line"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartTitle",
                                    "value": "Analytics"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartSubTitle",
                                    "value": "templafyprod1"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Dimensions",
                                    "value": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "InstanceName",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "TimeGenerated",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "UsagePercent",
                                                "type": "real"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "LegendOptions",
                                    "value": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "IsQueryContainTimeRange",
                                    "value": true
                                }
                            ],
                            "settings": {
                                "content": {
                                    "IsQueryContainTimeRange": false,
                                    "PartTitle": "CPU used percentage over time (Message Processor)",
                                    "Query": "let queryTimeRange = toscalar(Perf\n| summarize interval = (max(TimeGenerated)-min(TimeGenerated))\n| project interval);\nlet bin_size = (tr: timespan){\n    case(\n        tr <= 1h, 1m,\n        tr <= 24h, 10m,\n        1h\n        )\n};\nlet binSize = bin_size(queryTimeRange);\nlet capacityCounterName = 'cpuLimitNanoCores';\nlet usageCounterName = 'cpuUsageNanoCores';\nlet containerSystemName = \"user-management-messageprocessor\" ;\nPerf\n| where InstanceName endswith containerSystemName\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, binSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + binSize, LimitValue\n| join (\n  Perf\n  | where InstanceName endswith containerSystemName\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, binSize), InstanceName\n| render timechart \n\n"
                                }
                            },
                            "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 5,
                            "x": 7,
                            "y": 33
                        }
                    },
                    "17": {
                        "metadata": {
                            "filters": {
                                "EntityName": {
                                    "model": {
                                        "operator": "equals",
                                        "values": [
                                            "usermanagement"
                                        ]
                                    }
                                }
                            },
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "options",
                                    "value": {
                                        "chart": {
                                            "filterCollection": {
                                                "filters": [
                                                    {
                                                        "key": "EntityName",
                                                        "operator": 0,
                                                        "values": [
                                                            "librarymanagement"
                                                        ]
                                                    }
                                                ]
                                            },
                                            "metrics": [
                                                {
                                                    "aggregationType": 1,
                                                    "metricVisualization": {
                                                        "displayName": "Incoming Messages"
                                                    },
                                                    "name": "IncomingMessages",
                                                    "namespace": "microsoft.servicebus/namespaces",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod0/providers/Microsoft.ServiceBus/namespaces/templafyprod0"
                                                    }
                                                },
                                                {
                                                    "aggregationType": 1,
                                                    "metricVisualization": {
                                                        "displayName": "Outgoing Messages"
                                                    },
                                                    "name": "OutgoingMessages",
                                                    "namespace": "microsoft.servicebus/namespaces",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod0/providers/Microsoft.ServiceBus/namespaces/templafyprod0"
                                                    }
                                                }
                                            ],
                                            "timespan": {
                                                "grain": 1,
                                                "relative": {
                                                    "duration": 86400000
                                                },
                                                "showUTCTime": false
                                            },
                                            "title": "Message Trafic",
                                            "titleKind": 2,
                                            "visualization": {
                                                "axisVisualization": {
                                                    "x": {
                                                        "axisType": 2,
                                                        "isVisible": true
                                                    },
                                                    "y": {
                                                        "axisType": 1,
                                                        "isVisible": true
                                                    }
                                                },
                                                "chartType": 2,
                                                "legendVisualization": {
                                                    "hideSubtitle": false,
                                                    "isVisible": true,
                                                    "position": 2
                                                }
                                            }
                                        }
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "sharedTimeRange"
                                }
                            ],
                            "settings": {
                                "content": {
                                    "options": {
                                        "chart": {
                                            "metrics": [
                                                {
                                                    "aggregationType": 1,
                                                    "metricVisualization": {
                                                        "displayName": "Incoming Messages",
                                                        "resourceDisplayName": "templafyprod1"
                                                    },
                                                    "name": "IncomingMessages",
                                                    "namespace": "microsoft.servicebus/namespaces",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod1/providers/Microsoft.ServiceBus/namespaces/templafyprod1"
                                                    }
                                                },
                                                {
                                                    "aggregationType": 1,
                                                    "metricVisualization": {
                                                        "displayName": "Outgoing Messages",
                                                        "resourceDisplayName": "templafyprod1"
                                                    },
                                                    "name": "OutgoingMessages",
                                                    "namespace": "microsoft.servicebus/namespaces",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod1/providers/Microsoft.ServiceBus/namespaces/templafyprod1"
                                                    }
                                                }
                                            ],
                                            "title": "Message Traffic",
                                            "titleKind": 2,
                                            "visualization": {
                                                "axisVisualization": {
                                                    "x": {
                                                        "axisType": 2,
                                                        "isVisible": true
                                                    },
                                                    "y": {
                                                        "axisType": 1,
                                                        "isVisible": true
                                                    }
                                                },
                                                "chartType": 2,
                                                "disablePinning": true,
                                                "legendVisualization": {
                                                    "hideSubtitle": false,
                                                    "isVisible": true,
                                                    "position": 2
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "type": "Extension/HubsExtension/PartType/MonitorChartPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 4,
                            "x": 0,
                            "y": 38
                        }
                    },
                    "18": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "options",
                                    "value": {
                                        "chart": {
                                            "metrics": [
                                                {
                                                    "aggregationType": 4,
                                                    "metricVisualization": {
                                                        "displayName": "DTU percentage",
                                                        "resourceDisplayName": "templafyprod0/librarymanagement"
                                                    },
                                                    "name": "dtu_consumption_percent",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod0/providers/Microsoft.Sql/servers/templafyprod0/databases/LibraryManagement"
                                                    }
                                                }
                                            ],
                                            "openBladeOnClick": {
                                                "openBlade": true
                                            },
                                            "title": "Compute utilization",
                                            "titleKind": 2,
                                            "visualization": {
                                                "chartType": 2
                                            }
                                        }
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "sharedTimeRange"
                                }
                            ],
                            "settings": {
                                "content": {
                                    "options": {
                                        "chart": {
                                            "metrics": [
                                                {
                                                    "aggregationType": 4,
                                                    "metricVisualization": {
                                                        "displayName": "CPU percentage",
                                                        "resourceDisplayName": "templafyprod1/UserManagement"
                                                    },
                                                    "name": "cpu_percent",
                                                    "namespace": "microsoft.sql/servers/databases",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod1/providers/Microsoft.Sql/servers/templafyprod1/databases/UserManagement"
                                                    }
                                                },
                                                {
                                                    "aggregationType": 4,
                                                    "metricVisualization": {
                                                        "displayName": "Data IO percentage",
                                                        "resourceDisplayName": "templafyprod1/UserManagement"
                                                    },
                                                    "name": "physical_data_read_percent",
                                                    "namespace": "microsoft.sql/servers/databases",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod1/providers/Microsoft.Sql/servers/templafyprod1/databases/UserManagement"
                                                    }
                                                }
                                            ],
                                            "title": "Database DTU Average Usage",
                                            "titleKind": 2,
                                            "visualization": {
                                                "axisVisualization": {
                                                    "x": {
                                                        "axisType": 2,
                                                        "isVisible": true
                                                    },
                                                    "y": {
                                                        "axisType": 1,
                                                        "isVisible": true
                                                    }
                                                },
                                                "chartType": 2,
                                                "disablePinning": true,
                                                "legendVisualization": {
                                                    "hideSubtitle": false,
                                                    "isVisible": true,
                                                    "position": 2
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "type": "Extension/HubsExtension/PartType/MonitorChartPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 4,
                            "x": 7,
                            "y": 38
                        }
                    },
                    "19": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "options",
                                    "value": {
                                        "chart": {
                                            "metrics": [
                                                {
                                                    "aggregationType": 3,
                                                    "metricVisualization": {
                                                        "displayName": "CPU percentage",
                                                        "resourceDisplayName": "templafyprod1/templafyprod1"
                                                    },
                                                    "name": "cpu_percent",
                                                    "namespace": "microsoft.sql/servers/elasticpools",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod1/providers/Microsoft.Sql/servers/templafyprod1/elasticpools/templafyprod1"
                                                    }
                                                },
                                                {
                                                    "aggregationType": 3,
                                                    "metricVisualization": {
                                                        "displayName": "Data IO percentage",
                                                        "resourceDisplayName": "templafyprod1/templafyprod1"
                                                    },
                                                    "name": "physical_data_read_percent",
                                                    "namespace": "microsoft.sql/servers/elasticpools",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod1/providers/Microsoft.Sql/servers/templafyprod1/elasticpools/templafyprod1"
                                                    }
                                                },
                                                {
                                                    "aggregationType": 3,
                                                    "metricVisualization": {
                                                        "displayName": "Log IO percentage",
                                                        "resourceDisplayName": "templafyprod1/templafyprod1"
                                                    },
                                                    "name": "log_write_percent",
                                                    "namespace": "microsoft.sql/servers/elasticpools",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod1/providers/Microsoft.Sql/servers/templafyprod1/elasticpools/templafyprod1"
                                                    }
                                                },
                                                {
                                                    "aggregationType": 3,
                                                    "metricVisualization": {
                                                        "displayName": "Workers percentage",
                                                        "resourceDisplayName": "templafyprod1/templafyprod1"
                                                    },
                                                    "name": "workers_percent",
                                                    "namespace": "microsoft.sql/servers/elasticpools",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod1/providers/Microsoft.Sql/servers/templafyprod1/elasticpools/templafyprod1"
                                                    }
                                                }
                                            ],
                                            "timespan": {
                                                "grain": 1,
                                                "relative": {
                                                    "duration": 3600000
                                                },
                                                "showUTCTime": false
                                            },
                                            "title": "Resource utilization (templafyprod1)",
                                            "titleKind": 2,
                                            "visualization": {
                                                "axisVisualization": {
                                                    "x": {
                                                        "axisType": 2,
                                                        "isVisible": true
                                                    },
                                                    "y": {
                                                        "axisType": 1,
                                                        "isVisible": true
                                                    }
                                                },
                                                "chartType": 2,
                                                "legendVisualization": {
                                                    "hideSubtitle": false,
                                                    "isVisible": true,
                                                    "position": 2
                                                }
                                            }
                                        }
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "sharedTimeRange"
                                }
                            ],
                            "settings": {
                                "content": {
                                    "options": {
                                        "chart": {
                                            "metrics": [
                                                {
                                                    "aggregationType": 3,
                                                    "metricVisualization": {
                                                        "displayName": "CPU percentage",
                                                        "resourceDisplayName": "templafyprod1/templafyprod1"
                                                    },
                                                    "name": "cpu_percent",
                                                    "namespace": "microsoft.sql/servers/elasticpools",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod1/providers/Microsoft.Sql/servers/templafyprod1/elasticpools/templafyprod1"
                                                    }
                                                },
                                                {
                                                    "aggregationType": 3,
                                                    "metricVisualization": {
                                                        "displayName": "Data IO percentage",
                                                        "resourceDisplayName": "templafyprod1/templafyprod1"
                                                    },
                                                    "name": "physical_data_read_percent",
                                                    "namespace": "microsoft.sql/servers/elasticpools",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod1/providers/Microsoft.Sql/servers/templafyprod1/elasticpools/templafyprod1"
                                                    }
                                                },
                                                {
                                                    "aggregationType": 3,
                                                    "metricVisualization": {
                                                        "displayName": "Log IO percentage",
                                                        "resourceDisplayName": "templafyprod1/templafyprod1"
                                                    },
                                                    "name": "log_write_percent",
                                                    "namespace": "microsoft.sql/servers/elasticpools",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod1/providers/Microsoft.Sql/servers/templafyprod1/elasticpools/templafyprod1"
                                                    }
                                                },
                                                {
                                                    "aggregationType": 3,
                                                    "metricVisualization": {
                                                        "displayName": "Workers percentage",
                                                        "resourceDisplayName": "templafyprod1/templafyprod1"
                                                    },
                                                    "name": "workers_percent",
                                                    "namespace": "microsoft.sql/servers/elasticpools",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod1/providers/Microsoft.Sql/servers/templafyprod1/elasticpools/templafyprod1"
                                                    }
                                                }
                                            ],
                                            "title": "Resource utilization (templafyprod1)",
                                            "titleKind": 2,
                                            "visualization": {
                                                "axisVisualization": {
                                                    "x": {
                                                        "axisType": 2,
                                                        "isVisible": true
                                                    },
                                                    "y": {
                                                        "axisType": 1,
                                                        "isVisible": true
                                                    }
                                                },
                                                "chartType": 2,
                                                "disablePinning": true,
                                                "legendVisualization": {
                                                    "hideSubtitle": false,
                                                    "isVisible": true,
                                                    "position": 2
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "type": "Extension/HubsExtension/PartType/MonitorChartPart"
                        },
                        "position": {
                            "colSpan": 14,
                            "rowSpan": 5,
                            "x": 0,
                            "y": 42
                        }
                    },
                    "20": {
                        "metadata": {
                            "inputs": [],
                            "settings": {
                                "content": {
                                    "settings": {
                                        "content": "# Templafy Prod2 Resources\n",
                                        "markdownSource": 1,
                                        "subtitle": "",
                                        "title": ""
                                    }
                                }
                            },
                            "type": "Extension/HubsExtension/PartType/MarkdownPart"
                        },
                        "position": {
                            "colSpan": 14,
                            "rowSpan": 1,
                            "x": 0,
                            "y": 47
                        }
                    },
                    "21": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "resourceTypeMode"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ComponentId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Scope",
                                    "value": {
                                        "resourceIds": [
                                            "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod2/providers/Microsoft.ContainerService/managedClusters/templafyprod2"
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartId",
                                    "value": "4782570d-02d7-41bf-8727-38c8b15e14a1"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Version",
                                    "value": "2.0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "TimeRange"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DashboardId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DraftRequestParameters",
                                    "value": {
                                        "scope": "hierarchy"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "Query",
                                    "value": "let endDateTime = now();\nlet startDateTime = ago(12h);\nlet trendBinSize = 30m;\nlet capacityCounterName = 'cpuLimitNanoCores';\nlet usageCounterName = 'cpuUsageNanoCores';\nlet containerSystemName = \"account-management-webapi-systeminternal\" ;\nPerf\n| where InstanceName contains containerSystemName\n| where TimeGenerated < endDateTime\n| where TimeGenerated >= startDateTime\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, trendBinSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + trendBinSize, LimitValue\n| join (\n  Perf\n  | where InstanceName contains containerSystemName\n  | where TimeGenerated < endDateTime + trendBinSize\n  | where TimeGenerated >= startDateTime - trendBinSize\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, trendBinSize), InstanceName\n| render timechart \n\n"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ControlType",
                                    "value": "FrameControlChart"
                                },
                                {
                                    "isOptional": true,
                                    "name": "SpecificChart",
                                    "value": "Line"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartTitle",
                                    "value": "Analytics"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartSubTitle",
                                    "value": "templafyprod2"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Dimensions",
                                    "value": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "InstanceName",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "TimeGenerated",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "UsagePercent",
                                                "type": "real"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "LegendOptions",
                                    "value": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "IsQueryContainTimeRange",
                                    "value": true
                                }
                            ],
                            "settings": {
                                "content": {
                                    "IsQueryContainTimeRange": false,
                                    "PartTitle": "Memory used percentage over time (WebApi)",
                                    "Query": "let queryTimeRange = toscalar(Perf\n| summarize interval = (max(TimeGenerated)-min(TimeGenerated))\n| project interval);\nlet bin_size = (tr: timespan){\n    case(\n        tr <= 1h, 1m,\n        tr <= 24h, 10m,\n        1h\n        )\n};\nlet binSize = bin_size(queryTimeRange);\nlet capacityCounterName = 'memoryLimitBytes';\nlet usageCounterName = 'memoryRssBytes';\nlet container = \"user-management-webapi\" ;\nPerf\n| where InstanceName endswith container\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, binSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + binSize, LimitValue\n| join (\n  Perf\n  | where InstanceName endswith container\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, binSize), InstanceName\n| render timechart \n\n"
                                }
                            },
                            "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 5,
                            "x": 0,
                            "y": 48
                        }
                    },
                    "22": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "resourceTypeMode"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ComponentId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Scope",
                                    "value": {
                                        "resourceIds": [
                                            "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod2/providers/Microsoft.ContainerService/managedClusters/templafyprod2"
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartId",
                                    "value": "1404daf3-6e30-4a97-8412-c32dc2792d20"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Version",
                                    "value": "2.0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "TimeRange"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DashboardId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DraftRequestParameters",
                                    "value": {
                                        "scope": "hierarchy"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "Query",
                                    "value": "let endDateTime = now();\nlet startDateTime = ago(12h);\nlet trendBinSize = 30m;\nlet capacityCounterName = 'memoryLimitBytes';\nlet usageCounterName = 'memoryRssBytes';\nlet containerWebApiSystemInternal = \"account-management-messageprocessor\" ;\nPerf\n| where InstanceName contains containerWebApiSystemInternal\n| where TimeGenerated < endDateTime\n| where TimeGenerated >= startDateTime\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, trendBinSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + trendBinSize, LimitValue\n| join (\n  Perf\n  | where InstanceName contains containerWebApiSystemInternal\n  | where TimeGenerated < endDateTime + trendBinSize\n  | where TimeGenerated >= startDateTime - trendBinSize\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, trendBinSize), InstanceName\n| render timechart \n\n"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ControlType",
                                    "value": "FrameControlChart"
                                },
                                {
                                    "isOptional": true,
                                    "name": "SpecificChart",
                                    "value": "Line"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartTitle",
                                    "value": "Analytics"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartSubTitle",
                                    "value": "templafyprod2"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Dimensions",
                                    "value": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "InstanceName",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "TimeGenerated",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "UsagePercent",
                                                "type": "real"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "LegendOptions",
                                    "value": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "IsQueryContainTimeRange",
                                    "value": true
                                }
                            ],
                            "settings": {
                                "content": {
                                    "IsQueryContainTimeRange": false,
                                    "PartTitle": "Memory used percentage over time (Message processor)",
                                    "Query": "let queryTimeRange = toscalar(Perf\n| summarize interval = (max(TimeGenerated)-min(TimeGenerated))\n| project interval);\nlet bin_size = (tr: timespan){\n    case(\n        tr <= 1h, 1m,\n        tr <= 24h, 10m,\n        1h\n        )\n};\nlet binSize = bin_size(queryTimeRange);\nlet capacityCounterName = 'memoryLimitBytes';\nlet usageCounterName = 'memoryRssBytes';\nlet container = \"user-management-messageprocessor\" ;\nPerf\n| where InstanceName endswith container\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, binSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + binSize, LimitValue\n| join (\n  Perf\n  | where InstanceName endswith container\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, binSize), InstanceName\n| render timechart \n\n"
                                }
                            },
                            "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 5,
                            "x": 7,
                            "y": 48
                        }
                    },
                    "23": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "resourceTypeMode"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ComponentId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Scope",
                                    "value": {
                                        "resourceIds": [
                                            "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod2/providers/Microsoft.ContainerService/managedClusters/templafyprod2"
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartId",
                                    "value": "87246a30-a695-4ca9-913c-cdfbff6767d6"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Version",
                                    "value": "2.0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "TimeRange"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DashboardId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DraftRequestParameters",
                                    "value": {
                                        "scope": "hierarchy"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "Query",
                                    "value": "let endDateTime = now();\nlet startDateTime = ago(12h);\nlet trendBinSize = 30m;\nlet capacityCounterName = 'cpuLimitNanoCores';\nlet usageCounterName = 'cpuUsageNanoCores';\nlet containerSystemName = \"account-management-webapi-private\" ;\nPerf\n| where InstanceName contains containerSystemName\n| where TimeGenerated < endDateTime\n| where TimeGenerated >= startDateTime\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, trendBinSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + trendBinSize, LimitValue\n| join (\n  Perf\n  | where InstanceName contains containerSystemName\n  | where TimeGenerated < endDateTime + trendBinSize\n  | where TimeGenerated >= startDateTime - trendBinSize\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, trendBinSize), InstanceName\n| render timechart \n\n"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ControlType",
                                    "value": "FrameControlChart"
                                },
                                {
                                    "isOptional": true,
                                    "name": "SpecificChart",
                                    "value": "Line"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartTitle",
                                    "value": "Analytics"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartSubTitle",
                                    "value": "templafyprod2"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Dimensions",
                                    "value": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "InstanceName",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "TimeGenerated",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "UsagePercent",
                                                "type": "real"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "LegendOptions",
                                    "value": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "IsQueryContainTimeRange",
                                    "value": true
                                }
                            ],
                            "settings": {
                                "content": {
                                    "IsQueryContainTimeRange": false,
                                    "PartTitle": "CPU used percentage over time (WebApi)",
                                    "Query": "let queryTimeRange = toscalar(Perf\n| summarize interval = (max(TimeGenerated)-min(TimeGenerated))\n| project interval);\nlet bin_size = (tr: timespan){\n    case(\n        tr <= 1h, 1m,\n        tr <= 24h, 10m,\n        1h\n        )\n};\nlet binSize = bin_size(queryTimeRange);\nlet capacityCounterName = 'cpuLimitNanoCores';\nlet usageCounterName = 'cpuUsageNanoCores';\nlet containerSystemName = \"user-management-webapi\" ;\nPerf\n| where InstanceName has containerSystemName\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, binSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + binSize, LimitValue\n| join (\n  Perf\n  | where InstanceName has containerSystemName\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, binSize), InstanceName\n| render timechart \n\n"
                                }
                            },
                            "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 5,
                            "x": 0,
                            "y": 53
                        }
                    },
                    "24": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "resourceTypeMode"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ComponentId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Scope",
                                    "value": {
                                        "resourceIds": [
                                            "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod2/providers/Microsoft.ContainerService/managedClusters/templafyprod2"
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartId",
                                    "value": "4def7bad-4e2c-4cd8-a17d-fe29921453f4"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Version",
                                    "value": "2.0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "TimeRange"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DashboardId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DraftRequestParameters",
                                    "value": {
                                        "scope": "hierarchy"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "Query",
                                    "value": "let endDateTime = now();\nlet startDateTime = ago(12h);\nlet trendBinSize = 30m;\nlet capacityCounterName = 'cpuLimitNanoCores';\nlet usageCounterName = 'cpuUsageNanoCores';\nlet containerSystemName = \"account-management-messageprocessor\" ;\nPerf\n| where InstanceName contains containerSystemName\n| where TimeGenerated < endDateTime\n| where TimeGenerated >= startDateTime\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, trendBinSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + trendBinSize, LimitValue\n| join (\n  Perf\n  | where InstanceName contains containerSystemName\n  | where TimeGenerated < endDateTime + trendBinSize\n  | where TimeGenerated >= startDateTime - trendBinSize\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, trendBinSize), InstanceName\n| render timechart \n\n"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ControlType",
                                    "value": "FrameControlChart"
                                },
                                {
                                    "isOptional": true,
                                    "name": "SpecificChart",
                                    "value": "Line"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartTitle",
                                    "value": "Analytics"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartSubTitle",
                                    "value": "templafyprod2"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Dimensions",
                                    "value": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "InstanceName",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "TimeGenerated",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "UsagePercent",
                                                "type": "real"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "LegendOptions",
                                    "value": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "IsQueryContainTimeRange",
                                    "value": true
                                }
                            ],
                            "settings": {
                                "content": {
                                    "IsQueryContainTimeRange": false,
                                    "PartTitle": "CPU used percentage over time (Message Processor)",
                                    "Query": "let queryTimeRange = toscalar(Perf\n| summarize interval = (max(TimeGenerated)-min(TimeGenerated))\n| project interval);\nlet bin_size = (tr: timespan){\n    case(\n        tr <= 1h, 1m,\n        tr <= 24h, 10m,\n        1h\n        )\n};\nlet binSize = bin_size(queryTimeRange);\nlet capacityCounterName = 'cpuLimitNanoCores';\nlet usageCounterName = 'cpuUsageNanoCores';\nlet containerSystemName = \"user-management-messageprocessor\" ;\nPerf\n| where InstanceName endswith containerSystemName\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, binSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + binSize, LimitValue\n| join (\n  Perf\n  | where InstanceName endswith containerSystemName\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, binSize), InstanceName\n| render timechart \n\n"
                                }
                            },
                            "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 5,
                            "x": 7,
                            "y": 53
                        }
                    },
                    "25": {
                        "metadata": {
                            "filters": {
                                "EntityName": {
                                    "model": {
                                        "operator": "equals",
                                        "values": [
                                            "usermanagement"
                                        ]
                                    }
                                }
                            },
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "options",
                                    "value": {
                                        "chart": {
                                            "filterCollection": {
                                                "filters": [
                                                    {
                                                        "key": "EntityName",
                                                        "operator": 0,
                                                        "values": [
                                                            "librarymanagement"
                                                        ]
                                                    }
                                                ]
                                            },
                                            "metrics": [
                                                {
                                                    "aggregationType": 1,
                                                    "metricVisualization": {
                                                        "displayName": "Incoming Messages"
                                                    },
                                                    "name": "IncomingMessages",
                                                    "namespace": "microsoft.servicebus/namespaces",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod0/providers/Microsoft.ServiceBus/namespaces/templafyprod0"
                                                    }
                                                },
                                                {
                                                    "aggregationType": 1,
                                                    "metricVisualization": {
                                                        "displayName": "Outgoing Messages"
                                                    },
                                                    "name": "OutgoingMessages",
                                                    "namespace": "microsoft.servicebus/namespaces",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod0/providers/Microsoft.ServiceBus/namespaces/templafyprod0"
                                                    }
                                                }
                                            ],
                                            "timespan": {
                                                "grain": 1,
                                                "relative": {
                                                    "duration": 86400000
                                                },
                                                "showUTCTime": false
                                            },
                                            "title": "Message Trafic",
                                            "titleKind": 2,
                                            "visualization": {
                                                "axisVisualization": {
                                                    "x": {
                                                        "axisType": 2,
                                                        "isVisible": true
                                                    },
                                                    "y": {
                                                        "axisType": 1,
                                                        "isVisible": true
                                                    }
                                                },
                                                "chartType": 2,
                                                "legendVisualization": {
                                                    "hideSubtitle": false,
                                                    "isVisible": true,
                                                    "position": 2
                                                }
                                            }
                                        }
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "sharedTimeRange"
                                }
                            ],
                            "settings": {
                                "content": {
                                    "options": {
                                        "chart": {
                                            "metrics": [
                                                {
                                                    "aggregationType": 1,
                                                    "metricVisualization": {
                                                        "displayName": "Incoming Messages",
                                                        "resourceDisplayName": "templafyprod2"
                                                    },
                                                    "name": "IncomingMessages",
                                                    "namespace": "microsoft.servicebus/namespaces",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod2/providers/Microsoft.ServiceBus/namespaces/templafyprod2"
                                                    }
                                                },
                                                {
                                                    "aggregationType": 1,
                                                    "metricVisualization": {
                                                        "displayName": "Outgoing Messages",
                                                        "resourceDisplayName": "templafyprod2"
                                                    },
                                                    "name": "OutgoingMessages",
                                                    "namespace": "microsoft.servicebus/namespaces",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod2/providers/Microsoft.ServiceBus/namespaces/templafyprod2"
                                                    }
                                                }
                                            ],
                                            "title": "Message Traffic",
                                            "titleKind": 2,
                                            "visualization": {
                                                "axisVisualization": {
                                                    "x": {
                                                        "axisType": 2,
                                                        "isVisible": true
                                                    },
                                                    "y": {
                                                        "axisType": 1,
                                                        "isVisible": true
                                                    }
                                                },
                                                "chartType": 2,
                                                "disablePinning": true,
                                                "legendVisualization": {
                                                    "hideSubtitle": false,
                                                    "isVisible": true,
                                                    "position": 2
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "type": "Extension/HubsExtension/PartType/MonitorChartPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 4,
                            "x": 0,
                            "y": 58
                        }
                    },
                    "26": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "options",
                                    "value": {
                                        "chart": {
                                            "metrics": [
                                                {
                                                    "aggregationType": 4,
                                                    "metricVisualization": {
                                                        "displayName": "DTU percentage",
                                                        "resourceDisplayName": "templafyprod0/librarymanagement"
                                                    },
                                                    "name": "dtu_consumption_percent",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod0/providers/Microsoft.Sql/servers/templafyprod0/databases/LibraryManagement"
                                                    }
                                                }
                                            ],
                                            "openBladeOnClick": {
                                                "openBlade": true
                                            },
                                            "title": "Compute utilization",
                                            "titleKind": 2,
                                            "visualization": {
                                                "chartType": 2
                                            }
                                        }
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "sharedTimeRange"
                                }
                            ],
                            "settings": {
                                "content": {
                                    "options": {
                                        "chart": {
                                            "metrics": [
                                                {
                                                    "aggregationType": 4,
                                                    "metricVisualization": {
                                                        "displayName": "CPU percentage",
                                                        "resourceDisplayName": "templafyprod2/UserManagement"
                                                    },
                                                    "name": "cpu_percent",
                                                    "namespace": "microsoft.sql/servers/databases",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod2/providers/Microsoft.Sql/servers/templafyprod2/databases/UserManagement"
                                                    }
                                                },
                                                {
                                                    "aggregationType": 4,
                                                    "metricVisualization": {
                                                        "displayName": "Data IO percentage",
                                                        "resourceDisplayName": "templafyprod2/UserManagement"
                                                    },
                                                    "name": "physical_data_read_percent",
                                                    "namespace": "microsoft.sql/servers/databases",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod2/providers/Microsoft.Sql/servers/templafyprod2/databases/UserManagement"
                                                    }
                                                }
                                            ],
                                            "title": "Database DTU Average Usage",
                                            "titleKind": 2,
                                            "visualization": {
                                                "axisVisualization": {
                                                    "x": {
                                                        "axisType": 2,
                                                        "isVisible": true
                                                    },
                                                    "y": {
                                                        "axisType": 1,
                                                        "isVisible": true
                                                    }
                                                },
                                                "chartType": 2,
                                                "disablePinning": true,
                                                "legendVisualization": {
                                                    "hideSubtitle": false,
                                                    "isVisible": true,
                                                    "position": 2
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "type": "Extension/HubsExtension/PartType/MonitorChartPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 4,
                            "x": 7,
                            "y": 58
                        }
                    },
                    "27": {
                        "metadata": {
                            "inputs": [],
                            "settings": {
                                "content": {
                                    "settings": {
                                        "content": "# Templafy Prod3 Resources\n",
                                        "markdownSource": 1,
                                        "subtitle": "",
                                        "title": ""
                                    }
                                }
                            },
                            "type": "Extension/HubsExtension/PartType/MarkdownPart"
                        },
                        "position": {
                            "colSpan": 14,
                            "rowSpan": 1,
                            "x": 0,
                            "y": 62
                        }
                    },
                    "28": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "resourceTypeMode"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ComponentId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Scope",
                                    "value": {
                                        "resourceIds": [
                                            "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod3/providers/Microsoft.ContainerService/managedClusters/templafyprod3"
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartId",
                                    "value": "14847002-1293-47f6-b9e1-3735af520fb9"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Version",
                                    "value": "2.0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "TimeRange"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DashboardId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DraftRequestParameters",
                                    "value": {
                                        "scope": "hierarchy"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "Query",
                                    "value": "let endDateTime = now();\nlet startDateTime = ago(12h);\nlet trendBinSize = 30m;\nlet capacityCounterName = 'cpuLimitNanoCores';\nlet usageCounterName = 'cpuUsageNanoCores';\nlet containerSystemName = \"account-management-webapi-systeminternal\" ;\nPerf\n| where InstanceName contains containerSystemName\n| where TimeGenerated < endDateTime\n| where TimeGenerated >= startDateTime\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, trendBinSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + trendBinSize, LimitValue\n| join (\n  Perf\n  | where InstanceName contains containerSystemName\n  | where TimeGenerated < endDateTime + trendBinSize\n  | where TimeGenerated >= startDateTime - trendBinSize\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, trendBinSize), InstanceName\n| render timechart \n\n"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ControlType",
                                    "value": "FrameControlChart"
                                },
                                {
                                    "isOptional": true,
                                    "name": "SpecificChart",
                                    "value": "Line"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartTitle",
                                    "value": "Analytics"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartSubTitle",
                                    "value": "templafyprod3"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Dimensions",
                                    "value": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "InstanceName",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "TimeGenerated",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "UsagePercent",
                                                "type": "real"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "LegendOptions",
                                    "value": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "IsQueryContainTimeRange",
                                    "value": true
                                }
                            ],
                            "settings": {
                                "content": {
                                    "IsQueryContainTimeRange": false,
                                    "PartTitle": "Memory used percentage over time (WebApi)",
                                    "Query": "let queryTimeRange = toscalar(Perf\n| summarize interval = (max(TimeGenerated)-min(TimeGenerated))\n| project interval);\nlet bin_size = (tr: timespan){\n    case(\n        tr <= 1h, 1m,\n        tr <= 24h, 10m,\n        1h\n        )\n};\nlet binSize = bin_size(queryTimeRange);\nlet capacityCounterName = 'memoryLimitBytes';\nlet usageCounterName = 'memoryRssBytes';\nlet container = \"user-management-webapi\" ;\nPerf\n| where InstanceName endswith container\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, binSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + binSize, LimitValue\n| join (\n  Perf\n  | where InstanceName endswith container\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, binSize), InstanceName\n| render timechart\n"
                                }
                            },
                            "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 4,
                            "x": 0,
                            "y": 63
                        }
                    },
                    "29": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "resourceTypeMode"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ComponentId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Scope",
                                    "value": {
                                        "resourceIds": [
                                            "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod3/providers/Microsoft.ContainerService/managedClusters/templafyprod3"
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartId",
                                    "value": "2902f5bf-17cd-4ab0-8c00-be98bb2627c6"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Version",
                                    "value": "2.0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "TimeRange"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DashboardId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DraftRequestParameters",
                                    "value": {
                                        "scope": "hierarchy"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "Query",
                                    "value": "let endDateTime = now();\nlet startDateTime = ago(12h);\nlet trendBinSize = 30m;\nlet capacityCounterName = 'memoryLimitBytes';\nlet usageCounterName = 'memoryRssBytes';\nlet containerWebApiSystemInternal = \"account-management-messageprocessor\" ;\nPerf\n| where InstanceName contains containerWebApiSystemInternal\n| where TimeGenerated < endDateTime\n| where TimeGenerated >= startDateTime\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, trendBinSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + trendBinSize, LimitValue\n| join (\n  Perf\n  | where InstanceName contains containerWebApiSystemInternal\n  | where TimeGenerated < endDateTime + trendBinSize\n  | where TimeGenerated >= startDateTime - trendBinSize\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, trendBinSize), InstanceName\n| render timechart \n\n"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ControlType",
                                    "value": "FrameControlChart"
                                },
                                {
                                    "isOptional": true,
                                    "name": "SpecificChart",
                                    "value": "Line"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartTitle",
                                    "value": "Analytics"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartSubTitle",
                                    "value": "templafyprod3"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Dimensions",
                                    "value": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "InstanceName",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "TimeGenerated",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "UsagePercent",
                                                "type": "real"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "LegendOptions",
                                    "value": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "IsQueryContainTimeRange",
                                    "value": true
                                }
                            ],
                            "settings": {
                                "content": {
                                    "IsQueryContainTimeRange": false,
                                    "PartTitle": "Memory used percentage over time (Message processor)",
                                    "Query": "let queryTimeRange = toscalar(Perf\n| summarize interval = (max(TimeGenerated)-min(TimeGenerated))\n| project interval);\nlet bin_size = (tr: timespan){\n    case(\n        tr <= 1h, 1m,\n        tr <= 24h, 10m,\n        1h\n        )\n};\nlet binSize = bin_size(queryTimeRange);\nlet capacityCounterName = 'memoryLimitBytes';\nlet usageCounterName = 'memoryRssBytes';\nlet container = \"user-management-messageprocessor\" ;\nPerf\n| where InstanceName endswith container\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, binSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + binSize, LimitValue\n| join (\n  Perf\n  | where InstanceName endswith container\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, binSize), InstanceName\n| render timechart \n\n"
                                }
                            },
                            "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 4,
                            "x": 7,
                            "y": 63
                        }
                    },
                    "30": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "resourceTypeMode"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ComponentId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Scope",
                                    "value": {
                                        "resourceIds": [
                                            "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod3/providers/Microsoft.ContainerService/managedClusters/templafyprod3"
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartId",
                                    "value": "89a30d3e-6418-4744-a151-e7028a1143d7"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Version",
                                    "value": "2.0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "TimeRange"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DashboardId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DraftRequestParameters",
                                    "value": {
                                        "scope": "hierarchy"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "Query",
                                    "value": "let endDateTime = now();\nlet startDateTime = ago(12h);\nlet trendBinSize = 30m;\nlet capacityCounterName = 'cpuLimitNanoCores';\nlet usageCounterName = 'cpuUsageNanoCores';\nlet containerSystemName = \"account-management-webapi-private\" ;\nPerf\n| where InstanceName contains containerSystemName\n| where TimeGenerated < endDateTime\n| where TimeGenerated >= startDateTime\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, trendBinSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + trendBinSize, LimitValue\n| join (\n  Perf\n  | where InstanceName contains containerSystemName\n  | where TimeGenerated < endDateTime + trendBinSize\n  | where TimeGenerated >= startDateTime - trendBinSize\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, trendBinSize), InstanceName\n| render timechart \n\n"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ControlType",
                                    "value": "FrameControlChart"
                                },
                                {
                                    "isOptional": true,
                                    "name": "SpecificChart",
                                    "value": "Line"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartTitle",
                                    "value": "Analytics"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartSubTitle",
                                    "value": "templafyprod3"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Dimensions",
                                    "value": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "InstanceName",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "TimeGenerated",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "UsagePercent",
                                                "type": "real"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "LegendOptions",
                                    "value": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "IsQueryContainTimeRange",
                                    "value": true
                                }
                            ],
                            "settings": {
                                "content": {
                                    "IsQueryContainTimeRange": false,
                                    "PartTitle": "CPU used percentage over time (WebApi)",
                                    "Query": "let queryTimeRange = toscalar(Perf\n| summarize interval = (max(TimeGenerated)-min(TimeGenerated))\n| project interval);\nlet bin_size = (tr: timespan){\n    case(\n        tr <= 1h, 1m,\n        tr <= 24h, 10m,\n        1h\n        )\n};\nlet binSize = bin_size(queryTimeRange);\nlet capacityCounterName = 'cpuLimitNanoCores';\nlet usageCounterName = 'cpuUsageNanoCores';\nlet containerSystemName = \"user-management-webapi\" ;\nPerf\n| where InstanceName has containerSystemName\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, binSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + binSize, LimitValue\n| join (\n  Perf\n  | where InstanceName has containerSystemName\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, binSize), InstanceName\n| render timechart \n\n"
                                }
                            },
                            "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 4,
                            "x": 0,
                            "y": 67
                        }
                    },
                    "31": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "resourceTypeMode"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ComponentId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Scope",
                                    "value": {
                                        "resourceIds": [
                                            "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod3/providers/Microsoft.ContainerService/managedClusters/templafyprod3"
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartId",
                                    "value": "11a033d5-4211-4b11-9213-9d270a12f304"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Version",
                                    "value": "2.0"
                                },
                                {
                                    "isOptional": true,
                                    "name": "TimeRange"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DashboardId"
                                },
                                {
                                    "isOptional": true,
                                    "name": "DraftRequestParameters",
                                    "value": {
                                        "scope": "hierarchy"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "Query",
                                    "value": "let endDateTime = now();\nlet startDateTime = ago(12h);\nlet trendBinSize = 30m;\nlet capacityCounterName = 'cpuLimitNanoCores';\nlet usageCounterName = 'cpuUsageNanoCores';\nlet containerSystemName = \"account-management-messageprocessor\" ;\nPerf\n| where InstanceName contains containerSystemName\n| where TimeGenerated < endDateTime\n| where TimeGenerated >= startDateTime\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, trendBinSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + trendBinSize, LimitValue\n| join (\n  Perf\n  | where InstanceName contains containerSystemName\n  | where TimeGenerated < endDateTime + trendBinSize\n  | where TimeGenerated >= startDateTime - trendBinSize\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, trendBinSize), InstanceName\n| render timechart \n\n"
                                },
                                {
                                    "isOptional": true,
                                    "name": "ControlType",
                                    "value": "FrameControlChart"
                                },
                                {
                                    "isOptional": true,
                                    "name": "SpecificChart",
                                    "value": "Line"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartTitle",
                                    "value": "Analytics"
                                },
                                {
                                    "isOptional": true,
                                    "name": "PartSubTitle",
                                    "value": "templafyprod3"
                                },
                                {
                                    "isOptional": true,
                                    "name": "Dimensions",
                                    "value": {
                                        "aggregation": "Sum",
                                        "splitBy": [
                                            {
                                                "name": "InstanceName",
                                                "type": "string"
                                            }
                                        ],
                                        "xAxis": {
                                            "name": "TimeGenerated",
                                            "type": "datetime"
                                        },
                                        "yAxis": [
                                            {
                                                "name": "UsagePercent",
                                                "type": "real"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "LegendOptions",
                                    "value": {
                                        "isEnabled": true,
                                        "position": "Bottom"
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "IsQueryContainTimeRange",
                                    "value": true
                                }
                            ],
                            "settings": {
                                "content": {
                                    "IsQueryContainTimeRange": false,
                                    "PartTitle": "CPU used percentage over time (Message Processor)",
                                    "Query": "let queryTimeRange = toscalar(Perf\n| summarize interval = (max(TimeGenerated)-min(TimeGenerated))\n| project interval);\nlet bin_size = (tr: timespan){\n    case(\n        tr <= 1h, 1m,\n        tr <= 24h, 10m,\n        1h\n        )\n};\nlet binSize = bin_size(queryTimeRange);\nlet capacityCounterName = 'cpuLimitNanoCores';\nlet usageCounterName = 'cpuUsageNanoCores';\nlet containerSystemName = \"user-management-messageprocessor\" ;\nPerf\n| where InstanceName endswith containerSystemName\n| where ObjectName == 'K8SContainer'\n| where CounterName == capacityCounterName\n| summarize LimitValue = max(CounterValue) by InstanceName, CounterName, bin(TimeGenerated, binSize)\n| project InstanceName, CapacityStartTime = TimeGenerated, CapacityEndTime = TimeGenerated + binSize, LimitValue\n| join (\n  Perf\n  | where InstanceName endswith containerSystemName\n  | where ObjectName == 'K8SContainer'\n  | where CounterName == usageCounterName\n  | project InstanceName, UsageValue = CounterValue, TimeGenerated\n) on InstanceName\n| project InstanceName, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue\n| summarize UsagePercent = avg(UsagePercent) by bin(TimeGenerated, binSize), InstanceName\n| render timechart \n\n"
                                }
                            },
                            "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 4,
                            "x": 7,
                            "y": 67
                        }
                    },
                    "32": {
                        "metadata": {
                            "filters": {
                                "EntityName": {
                                    "model": {
                                        "operator": "equals",
                                        "values": [
                                            "usermanagement"
                                        ]
                                    }
                                }
                            },
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "options",
                                    "value": {
                                        "chart": {
                                            "filterCollection": {
                                                "filters": [
                                                    {
                                                        "key": "EntityName",
                                                        "operator": 0,
                                                        "values": [
                                                            "librarymanagement"
                                                        ]
                                                    }
                                                ]
                                            },
                                            "metrics": [
                                                {
                                                    "aggregationType": 1,
                                                    "metricVisualization": {
                                                        "displayName": "Incoming Messages"
                                                    },
                                                    "name": "IncomingMessages",
                                                    "namespace": "microsoft.servicebus/namespaces",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod0/providers/Microsoft.ServiceBus/namespaces/templafyprod0"
                                                    }
                                                },
                                                {
                                                    "aggregationType": 1,
                                                    "metricVisualization": {
                                                        "displayName": "Outgoing Messages"
                                                    },
                                                    "name": "OutgoingMessages",
                                                    "namespace": "microsoft.servicebus/namespaces",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod0/providers/Microsoft.ServiceBus/namespaces/templafyprod0"
                                                    }
                                                }
                                            ],
                                            "timespan": {
                                                "grain": 1,
                                                "relative": {
                                                    "duration": 86400000
                                                },
                                                "showUTCTime": false
                                            },
                                            "title": "Message Trafic",
                                            "titleKind": 2,
                                            "visualization": {
                                                "axisVisualization": {
                                                    "x": {
                                                        "axisType": 2,
                                                        "isVisible": true
                                                    },
                                                    "y": {
                                                        "axisType": 1,
                                                        "isVisible": true
                                                    }
                                                },
                                                "chartType": 2,
                                                "legendVisualization": {
                                                    "hideSubtitle": false,
                                                    "isVisible": true,
                                                    "position": 2
                                                }
                                            }
                                        }
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "sharedTimeRange"
                                }
                            ],
                            "settings": {
                                "content": {
                                    "options": {
                                        "chart": {
                                            "metrics": [
                                                {
                                                    "aggregationType": 1,
                                                    "metricVisualization": {
                                                        "displayName": "Incoming Messages",
                                                        "resourceDisplayName": "templafyprod3"
                                                    },
                                                    "name": "IncomingMessages",
                                                    "namespace": "microsoft.servicebus/namespaces",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod3/providers/Microsoft.ServiceBus/namespaces/templafyprod3"
                                                    }
                                                },
                                                {
                                                    "aggregationType": 1,
                                                    "metricVisualization": {
                                                        "displayName": "Outgoing Messages",
                                                        "resourceDisplayName": "templafyprod3"
                                                    },
                                                    "name": "OutgoingMessages",
                                                    "namespace": "microsoft.servicebus/namespaces",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod3/providers/Microsoft.ServiceBus/namespaces/templafyprod3"
                                                    }
                                                }
                                            ],
                                            "title": "Message Traffic",
                                            "titleKind": 2,
                                            "visualization": {
                                                "axisVisualization": {
                                                    "x": {
                                                        "axisType": 2,
                                                        "isVisible": true
                                                    },
                                                    "y": {
                                                        "axisType": 1,
                                                        "isVisible": true
                                                    }
                                                },
                                                "chartType": 2,
                                                "disablePinning": true,
                                                "legendVisualization": {
                                                    "hideSubtitle": false,
                                                    "isVisible": true,
                                                    "position": 2
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "type": "Extension/HubsExtension/PartType/MonitorChartPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 4,
                            "x": 0,
                            "y": 71
                        }
                    },
                    "33": {
                        "metadata": {
                            "inputs": [
                                {
                                    "isOptional": true,
                                    "name": "options",
                                    "value": {
                                        "chart": {
                                            "metrics": [
                                                {
                                                    "aggregationType": 4,
                                                    "metricVisualization": {
                                                        "displayName": "DTU percentage",
                                                        "resourceDisplayName": "templafyprod0/librarymanagement"
                                                    },
                                                    "name": "dtu_consumption_percent",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod0/providers/Microsoft.Sql/servers/templafyprod0/databases/LibraryManagement"
                                                    }
                                                }
                                            ],
                                            "openBladeOnClick": {
                                                "openBlade": true
                                            },
                                            "title": "Compute utilization",
                                            "titleKind": 2,
                                            "visualization": {
                                                "chartType": 2
                                            }
                                        }
                                    }
                                },
                                {
                                    "isOptional": true,
                                    "name": "sharedTimeRange"
                                }
                            ],
                            "settings": {
                                "content": {
                                    "options": {
                                        "chart": {
                                            "metrics": [
                                                {
                                                    "aggregationType": 4,
                                                    "metricVisualization": {
                                                        "displayName": "CPU percentage",
                                                        "resourceDisplayName": "templafyprod3/UserManagement"
                                                    },
                                                    "name": "cpu_percent",
                                                    "namespace": "microsoft.sql/servers/databases",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod3/providers/Microsoft.Sql/servers/templafyprod3/databases/UserManagement"
                                                    }
                                                },
                                                {
                                                    "aggregationType": 4,
                                                    "metricVisualization": {
                                                        "displayName": "Data IO percentage",
                                                        "resourceDisplayName": "templafyprod3/UserManagement"
                                                    },
                                                    "name": "physical_data_read_percent",
                                                    "namespace": "microsoft.sql/servers/databases",
                                                    "resourceMetadata": {
                                                        "id": "/subscriptions/5b17cf24-70b2-4d5a-b0a2-295036ef873b/resourceGroups/Prod3/providers/Microsoft.Sql/servers/templafyprod3/databases/UserManagement"
                                                    }
                                                }
                                            ],
                                            "title": "Database DTU Average Usage",
                                            "titleKind": 2,
                                            "visualization": {
                                                "axisVisualization": {
                                                    "x": {
                                                        "axisType": 2,
                                                        "isVisible": true
                                                    },
                                                    "y": {
                                                        "axisType": 1,
                                                        "isVisible": true
                                                    }
                                                },
                                                "chartType": 2,
                                                "disablePinning": true,
                                                "legendVisualization": {
                                                    "hideSubtitle": false,
                                                    "isVisible": true,
                                                    "position": 2
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "type": "Extension/HubsExtension/PartType/MonitorChartPart"
                        },
                        "position": {
                            "colSpan": 7,
                            "rowSpan": 4,
                            "x": 7,
                            "y": 71
                        }
                    }
                }
            }
        },
        "metadata": {
            "model": {
                "filterLocale": {
                    "value": "en-us"
                },
                "filters": {
                    "value": {
                        "MsPortalFx_TimeRange": {
                            "displayCache": {
                                "name": "Local Time",
                                "value": "Past 30 minutes"
                            },
                            "filteredPartIds": [
                                "StartboardPart-MonitorChartPart-623466b6-5d3d-46b8-94cd-389b6c62f03c",
                                "StartboardPart-LogsDashboardPart-623466b6-5d3d-46b8-94cd-389b6c62f03e",
                                "StartboardPart-LogsDashboardPart-623466b6-5d3d-46b8-94cd-389b6c62f040",
                                "StartboardPart-LogsDashboardPart-623466b6-5d3d-46b8-94cd-389b6c62f042",
                                "StartboardPart-LogsDashboardPart-623466b6-5d3d-46b8-94cd-389b6c62f046",
                                "StartboardPart-LogsDashboardPart-623466b6-5d3d-46b8-94cd-389b6c62f048",
                                "StartboardPart-LogsDashboardPart-623466b6-5d3d-46b8-94cd-389b6c62f04a",
                                "StartboardPart-LogsDashboardPart-623466b6-5d3d-46b8-94cd-389b6c62f04c",
                                "StartboardPart-MonitorChartPart-623466b6-5d3d-46b8-94cd-389b6c62f04e",
                                "StartboardPart-MonitorChartPart-623466b6-5d3d-46b8-94cd-389b6c62f050",
                                "StartboardPart-LogsDashboardPart-623466b6-5d3d-46b8-94cd-389b6c62f054",
                                "StartboardPart-LogsDashboardPart-623466b6-5d3d-46b8-94cd-389b6c62f056",
                                "StartboardPart-LogsDashboardPart-623466b6-5d3d-46b8-94cd-389b6c62f058",
                                "StartboardPart-LogsDashboardPart-623466b6-5d3d-46b8-94cd-389b6c62f05a",
                                "StartboardPart-MonitorChartPart-623466b6-5d3d-46b8-94cd-389b6c62f05c",
                                "StartboardPart-MonitorChartPart-623466b6-5d3d-46b8-94cd-389b6c62f05e",
                                "StartboardPart-MonitorChartPart-623466b6-5d3d-46b8-94cd-389b6c62f060",
                                "StartboardPart-LogsDashboardPart-623466b6-5d3d-46b8-94cd-389b6c62f064",
                                "StartboardPart-LogsDashboardPart-623466b6-5d3d-46b8-94cd-389b6c62f066",
                                "StartboardPart-LogsDashboardPart-623466b6-5d3d-46b8-94cd-389b6c62f068",
                                "StartboardPart-LogsDashboardPart-623466b6-5d3d-46b8-94cd-389b6c62f06a",
                                "StartboardPart-MonitorChartPart-623466b6-5d3d-46b8-94cd-389b6c62f06c",
                                "StartboardPart-MonitorChartPart-623466b6-5d3d-46b8-94cd-389b6c62f06e",
                                "StartboardPart-LogsDashboardPart-623466b6-5d3d-46b8-94cd-389b6c62f072",
                                "StartboardPart-LogsDashboardPart-623466b6-5d3d-46b8-94cd-389b6c62f074",
                                "StartboardPart-LogsDashboardPart-623466b6-5d3d-46b8-94cd-389b6c62f076",
                                "StartboardPart-LogsDashboardPart-623466b6-5d3d-46b8-94cd-389b6c62f078",
                                "StartboardPart-MonitorChartPart-623466b6-5d3d-46b8-94cd-389b6c62f07a",
                                "StartboardPart-MonitorChartPart-623466b6-5d3d-46b8-94cd-389b6c62f07c"
                            ],
                            "model": {
                                "format": "local",
                                "granularity": "auto",
                                "relative": "30m"
                            }
                        }
                    }
                },
                "timeRange": {
                    "type": "MsPortalFx.Composition.Configuration.ValueTypes.TimeRange",
                    "value": {
                        "relative": {
                            "duration": 24,
                            "timeUnit": 1
                        }
                    }
                }
            }
        }
    }
}